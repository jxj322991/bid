
var main={name:'self_library',data:{search:true,tableClear:true,ajax1:{name:'myNewsList',uid:1001,context:undefined,field:undefined,start:0,size:20}},start:function(){$('.left-list .item1').addClass('active');ajax_news.myNewsList(main.data.ajax1,main.table_show);},table_show:function(data){common.skip(data);var list=data.context.list;var html1=' ';for(var i=0;i<list.length;i++){var html2='';var html3='';var channel=list[i].news.moniChannel?list[i].news.moniChannel.split(','):'';for(var j=0;j<channel.length;j++){if(channel[j]){html2+=`<span>【${channel[j]}】</span>`;}}
switch(list[i].news.status){case 0:html3="待审核";break;case 1:html3='一审通过';break;case 2:html3='二审通过';break;case 3:html3='三审通过';break;case 4:html3='已发刊';break;case-1:html3='草稿';break;default:html3="未知状态";break;}
html1+=`<tr class="${i % 2 == 0 ? 'bg_write' : 'bg_gray'}" tr_id = '${list[i].news.id}'><td class="type1">${list[i].news.id}</td><td class="type2"><span>【${list[i].news.field}】</span><a href="javascript:void(0)">${list[i].news.title}</a></td><td class="type3">${html3}</td><td class="type4">${html2}</td><td class="type1">${list[i].news.createTime}</td><td class="type5"><a href="javascript:void(0)" class='t_bianji'>编辑</a><a href="javascript:void(0)" class='t_chakan'>查看</a><a href="javascript:void(0)" class='t_bidui'>比对</a></td></tr>`;}
$('.contain_b tbody').html(html1);},choice:function(){var k1=$('#s_input')[0].value||undefined;var k2=$('#s_field')[0].value||undefined;k2=k2=='0'?undefined:k2;main.data.ajax1.context=k1;main.data.ajax1.field=k2;main.data.ajax1.start=0;main.data.ajax1.size=20;ajax_news.myNewsList(main.data.ajax1,main.table_show);}};main.start();$('#s_search').on('click',function(){main.choice();});