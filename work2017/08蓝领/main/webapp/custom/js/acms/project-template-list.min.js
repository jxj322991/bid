$.get("/api/v1/acms/GetProjectTemplateType").done(function(a){ajaxResHandle(a,function(){if(a.context.length>0){var t=a.context,o="",e="";$.each(t,function(a,t){o+='<li class="nav-item">\n                <a class="nav-link" href="#tab-'+t.type+'" data-cj="tab" data-type="'+t.type+'">'+t.name+"</a>\n            </li>",e+='<div class="tab-pane fade" id="tab-'+t.type+'">\n            <div class="goods-list"></div>\n        </div>'}),$(".nav").append(o),$(".tab-content").append(e),$("[data-cj=tab]").click(function(a){if(a.preventDefault(),!$(this).hasClass("active")){$(this).closest(".nav").find("[data-cj=tab]").removeClass("active"),$(this).addClass("active");var t=$(this).attr("href")||$(this).data("target");$(t).closest(".tab-content").find(".tab-pane").removeClass("active in").scrollTop(0),$(t).addClass("active in"),n.ajaxObj.data.type=$(this).data("type"),n.ajaxObj.data.start=$(t).data("start")-0||0,n.dropLoadInit()}});var n={dropLoad:{},ajaxObj:{url:"/api/v1/acms/GetProjectTemplates",type:"GET",data:{start:0,size:10}},dropLoadFn:function(){var a=this;this.dropLoad=$(".tab-content").dropload({scrollArea:window,autoLoad:!0,distance:10,loadDownFn:function(t){$.ajax(a.ajaxObj).done(function(o){ajaxResHandle(o,a.render,[t,a])}).fail(function(){t.lock(),t.noData(),t.resetload(),$(".dropload-noData").html('<div class="dropload-error">加载出错<br>点我重试</div>'),$(".dropload-error").off().click(function(){dropLoad.noData(!1),dropLoad.unlock(),dropLoad.resetload()})})}})},dropLoadInit:function(){this.ajaxObj.data.size=10,this.dropLoad.noData(!1),this.dropLoad.unlock(),this.dropLoad.resetload()},render:function(a,t,o){var e=a.context.templates||[],n=e.length;o.ajaxObj.data.start+=n;var d=a.context.type?"#tab-"+a.context.type:"#all";if($(d).closest(".tab-pane").data("start",o.ajaxObj.data.start),n>0){var s="";$.each(e,function(a,t){s+='<div class="goods-item">\n                        <div class="goods-title">\n                        <img src="'+t.thumb+'" class="activity_img">\n                        <div class="goods-mask text-center">\n                        <span>'+t.actsCount+'</span>个活动使用\n                    </div>\n                    <img src="//saascore.oss-cn-beijing.aliyuncs.com/mobile/custom/img/acms/hot.png" class="goods-mask_hot">\n                        </div>\n                        <div class="goods-info">\n                        <div class="goods-info_title text-center">'+t.name+'</div>\n                    <a href="/html/acms/project-template-detail.html?projectid='+t.projectId+'" class="detail-btn border-radius">查看详情</a>\n                        </div>\n                        </div>\n                        </div>'}),$(d).find(".goods-list").append(s)}else t.lock(),t.noData();t.resetload()}};n.dropLoadFn()}})});